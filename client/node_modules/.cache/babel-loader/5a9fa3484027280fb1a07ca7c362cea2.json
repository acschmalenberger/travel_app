{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\d_cha\\\\Desktop\\\\travel_app\\\\client\\\\src\\\\components\\\\auth\\\\Signin.js\";\nimport React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport { withStyles } from '@material-ui/core/styles';\nimport auth from './auth-helper';\nimport { Redirect } from 'react-router-dom';\nimport { signin } from '../../utils/api-auth.js';\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      maxWidth: 600,\n      margin: 'auto',\n      textAlign: 'center',\n      marginTop: theme.spacing.unit * 5,\n      paddingBottom: theme.spacing.unit * 2\n    },\n    error: {\n      verticalAlign: 'middle'\n    },\n    title: {\n      marginTop: theme.spacing.unit * 2,\n      color: theme.palette.openTitle\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      width: 300\n    },\n    submit: {\n      margin: 'auto',\n      marginBottom: theme.spacing.unit * 2\n    }\n  };\n};\n\nvar Signin = /*#__PURE__*/function (_Component) {\n  _inherits(Signin, _Component);\n\n  function Signin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      password: '',\n      error: '',\n      redirectToReferrer: false\n    };\n\n    _this.clickSubmit = function () {\n      var user = {\n        email: _this.state.email || undefined,\n        password: _this.state.password || undefined\n      };\n      signin(user).then(function (data) {\n        if (data.error) {\n          _this.setState({\n            error: data.error\n          });\n        } else {\n          auth.authenticate(data, function () {\n            _this.setState({\n              redirectToReferrer: true\n            });\n          });\n        }\n      });\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Signin, [{\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n\n      var _ref = this.props.location.state || {\n        from: {\n          pathname: '/'\n        }\n      },\n          from = _ref.from;\n\n      var redirectToReferrer = this.state.redirectToReferrer;\n\n      if (redirectToReferrer) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: from,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 20\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(Card, {\n        className: classes.card,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        type: \"headline\",\n        component: \"h2\",\n        className: classes.title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }\n      }, \"Sign In\"), /*#__PURE__*/React.createElement(TextField, {\n        id: \"email\",\n        type: \"email\",\n        label: \"Email\",\n        className: classes.textField,\n        value: this.state.email,\n        onChange: this.handleChange('email'),\n        margin: \"normal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(TextField, {\n        id: \"password\",\n        type: \"password\",\n        label: \"Password\",\n        className: classes.textField,\n        value: this.state.password,\n        onChange: this.handleChange('password'),\n        margin: \"normal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }\n      }), ' ', this.state.error && /*#__PURE__*/React.createElement(Typography, {\n        component: \"p\",\n        color: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        color: \"error\",\n        className: classes.error,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }\n      }, \"error\"), this.state.error)), /*#__PURE__*/React.createElement(CardActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        variant: \"raised\",\n        onClick: this.clickSubmit,\n        className: classes.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, \"Submit\")));\n    }\n  }]);\n\n  return Signin;\n}(Component);\n\nexport default withStyles(styles)(Signin);","map":{"version":3,"sources":["C:/Users/d_cha/Desktop/travel_app/client/src/components/auth/Signin.js"],"names":["React","Component","Card","CardContent","CardMedia","Button","TextField","Typography","Icon","withStyles","auth","Redirect","signin","styles","theme","card","maxWidth","margin","textAlign","marginTop","spacing","unit","paddingBottom","error","verticalAlign","title","color","palette","openTitle","textField","marginLeft","marginRight","width","submit","marginBottom","Signin","state","email","password","redirectToReferrer","clickSubmit","user","undefined","then","data","setState","authenticate","handleChange","name","event","target","value","classes","props","location","from","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport auth from './auth-helper';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { signin } from '../../utils/api-auth.js';\r\n\r\nconst styles = theme => ({\r\n    card: {\r\n        maxWidth: 600,\r\n        margin: 'auto',\r\n        textAlign: 'center',\r\n        marginTop: theme.spacing.unit * 5,\r\n        paddingBottom: theme.spacing.unit * 2\r\n    },\r\n    error: {\r\n        verticalAlign: 'middle'\r\n    },\r\n    title: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        color: theme.palette.openTitle\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 300\r\n    },\r\n    submit: {\r\n        margin: 'auto',\r\n        marginBottom: theme.spacing.unit * 2\r\n    }\r\n});\r\n\r\nclass Signin extends Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        redirectToReferrer: false\r\n    };\r\n\r\n    clickSubmit = () => {\r\n        const user = {\r\n            email: this.state.email || undefined,\r\n            password: this.state.password || undefined\r\n        };\r\n\r\n        signin(user).then(data => {\r\n            if (data.error) {\r\n                this.setState({ error: data.error });\r\n            } else {\r\n                auth.authenticate(data, () => {\r\n                    this.setState({ redirectToReferrer: true });\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    handleChange = name => event => {\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { from } = this.props.location.state || {\r\n            from: {\r\n                pathname: '/'\r\n            }\r\n        };\r\n        const { redirectToReferrer } = this.state;\r\n        if (redirectToReferrer) {\r\n            return <Redirect to={from} />;\r\n        }\r\n\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardContent>\r\n                    <Typography type=\"headline\" component=\"h2\" className={classes.title}>\r\n                        Sign In\r\n\t\t\t\t\t</Typography>\r\n                    <TextField\r\n                        id=\"email\"\r\n                        type=\"email\"\r\n                        label=\"Email\"\r\n                        className={classes.textField}\r\n                        value={this.state.email}\r\n                        onChange={this.handleChange('email')}\r\n                        margin=\"normal\"\r\n                    />\r\n                    <br />\r\n                    <TextField\r\n                        id=\"password\"\r\n                        type=\"password\"\r\n                        label=\"Password\"\r\n                        className={classes.textField}\r\n                        value={this.state.password}\r\n                        onChange={this.handleChange('password')}\r\n                        margin=\"normal\"\r\n                    />\r\n                    <br />{' '}\r\n                    {this.state.error && (\r\n                        <Typography component=\"p\" color=\"error\">\r\n                            <Icon color=\"error\" className={classes.error}>\r\n                                error\r\n\t\t\t\t\t\t\t</Icon>\r\n                            {this.state.error}\r\n                        </Typography>\r\n                    )}\r\n                </CardContent>\r\n                <CardActions>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant=\"raised\"\r\n                        onClick={this.clickSubmit}\r\n                        className={classes.submit}\r\n                    >\r\n                        Submit\r\n\t\t\t\t\t</Button>\r\n                </CardActions>\r\n            </Card >\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Signin);"]},"metadata":{},"sourceType":"module"}